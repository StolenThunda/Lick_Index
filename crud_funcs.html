<script>
function output_table(data) {
    json = JSON.parse(data)
 // CREATE DYNAMIC TABLE.
 var table = document.createElement("table"); 
 var header = table.createTHead();
 var row = header.insertRow(0);
 var headers = Object.keys(json.records[0]);
 var cell;
 for (var i = 0; i < headers.length; i++) {
     cell = row.insertCell(i);
     cell.innerHTML = '<b>' + headers[i] + '</b>' 
 }

 
 // ADD JSON DATA TO THE TABLE AS ROWS.
 for (var i = 0; i < json.records.length; i++) {
    cur_vals = Object.values(json.records[i]);
    tr = table.insertRow(-1);
    for (var j = 0; j < cur_vals.length; j++) {
       var tabCell = tr.insertCell(-1);
       tabCell.innerHTML = cur_vals[j];
    }
 }
 
 
 // FINALLY ADD THE NEWLY CREATED TABLE WITH JSON DATA TO A CONTAINER.
 var divContainer = document.getElementById("output");
 divContainer.innerHTML = "";
 divContainer.appendChild(table);
}


</script>

